<div class="container" (window:resize)="onResize($event)">
  <div class="d-flex justify-content-center pt-3">
    <h1>Electrical <strong>{{electricalItem?.equipmentTag}}</strong></h1>
  </div>
  <form (ngSubmit)="saveElectrical(electricalItem._id, electricalForm.value)" #electricalForm="ngForm">
    <div class="row">
      <div class="col-12 col-xl-6 align-self-start">
        <div class="d-flex justify-content-center">
          <span class="h4">Electrical Equipment Entry</span>
        </div>
          <div class="row">
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="itemNumber">Item number</label>
                <input type="text" class="form-control"  name="itemNumber" disabled> <!--[(ngModel)]="electricalItem.itemNumber" -->
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="dateCreate">Date added</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.dateCreate" name="dateCreate">
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="revision">Revision</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.revision" name="revision">
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="quantity">Quantity</label>
                <input type="number" class="form-control" [(ngModel)]="electricalItem.quantity" name="quantity">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="equipmentType">Equipment Type</label>
                <select
                  id="selectedEquipmentType"
                  class="form-control"
                  [(ngModel)]="electricalItem.selectedEquipmentType"
                  name="selectedEquipmentType"
                  >
                  <option
                    *ngFor="let currentEquipmentType of electricalItem.equipmentType" 
                    [ngValue]="currentEquipmentType"
                    [selected]="currentEquipmentType==electricalItem.selectedEquipmentType">
                      {{currentEquipmentType}}
                  </option>
                </select>
              </div>            
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="pidDrawing">Pid Drawing</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.pidDrawing" name="pidDrawing" disabled>
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="layoutDrawing">Layout Drawing</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.layoutDrawing" name="layoutDrawing" disabled>
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="sldDraving">SLD Drawing</label>
                <input type="number" class="form-control" [(ngModel)]="electricalItem.sldDraving" name="sldDraving" disabled>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="equipmentTag">Equipment Tag</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.equipmentTag" name="equipmentTag" >
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="equipmentTag2">Equipment Tag 2</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.equipmentTag" name="equipmentTag2" disabled>
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="parentTag">Parent Tag</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.parentTag" name="parentTag" disabled>
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="equipmentNotes">Equipment Notes</label>
                <input type="number" class="form-control" [(ngModel)]="electricalItem.equipmentNotes" name="equipmentNotes">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="locationArea">Location/Area</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.locationArea" name="locationArea" disabled>
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="equipmentDescription">Equipment Description</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.equipmentDescription" name="equipmentDescription" disabled>
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="cloneTag">Clone Tag</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.cloneTag" name="cloneTag" disabled>
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="newTag">New Tag</label>
                <input type="number" class="form-control" [(ngModel)]="electricalItem.newTag" name="newTag">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="locationArea">Length(mm)</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.length" name="length" >
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="depth">Depth(mm)</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.depth" name="depth">
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="height">Height(mm)</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.height" name="height">
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="weight">Weight(kg)</label>
                <input type="number" class="form-control" [(ngModel)]="electricalItem.weight" name="weight">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="coordForX">X Coord(m)</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.coordForX" name="coordForX" >
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="coordForY">Y Coord(m)</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.coordForY" name="coordForY">
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="coordForZ">Z Coord(m)</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.coordForZ" name="coordForZ">
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="heatDissipation">Heat Dissipation (W)</label>
                <input type="number" class="form-control" [(ngModel)]="electricalItem.heatDissipation" name="heatDissipation">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="scenarioFirstLoadFactor">Scenario 1 Load Factor %</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.scenarioFirstLoadFactor" name="scenarioFirstLoadFactor" >
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-xl-6 align-self-start">
          <div class="d-flex justify-content-center">
            <span class="h4">General Rating</span>
          </div>
          <div class="row">
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="powerSystem">Power System</label>
                <select
                  id="selectedPowerSystem"
                  class="form-control"
                  [(ngModel)]="electricalItem.selectedPowerSystem"
                  name="selectedPowerSystem"
                  >
                  <option
                    *ngFor="let currentData of electricalItem.powerSystem" 
                    [ngValue]="currentData"
                    [selected]="currentData==electricalItem.selectedPowerSystem">
                      {{currentData}}
                  </option>
                </select>
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="voltage">Voltage</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.voltage" name="voltage" disabled>
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="totalPF">Total % P.F.</label>
                <input type="number" class="form-control" [(ngModel)]="electricalItem.totalPF" name="totalPF">
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="totalEFF">Total % EFF.</label>
                <input type="number" class="form-control" [(ngModel)]="electricalItem.totalEFF" name="totalEFF">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="nameplateRating">Nameplate Rating</label>
                <input type="text" class="form-control" [(ngModel)]="electricalItem.nameplateRating" name="nameplateRating">
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="units">Units</label>
                <select
                  id="selectedUnits"
                  class="form-control"
                  [(ngModel)]="electricalItem.selectedUnits"
                  name="selectedUnits"
                >
                  <option
                    *ngFor="let currentUnit of electricalItem.units" 
                    [ngValue]="currentUnit"
                    [selected]="currentUnit==electricalItem.selectedUnits"
                  >
                    {{currentUnit}}
                  </option>
                </select>
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="selectedMotorSF">Motor S.F.</label>
                <select
                id="selectedMotorSF"
                class="form-control"
                [(ngModel)]="electricalItem.selectedMotorSF"
                name="selectedMotorSF"
                >
                  <option
                    *ngFor="let currentMotorSF of electricalItem.motorSF" 
                    [ngValue]="currentMotorSF"
                    [selected]="currentMotorSF==electricalItem.selectedMotorSF"
                  >
                    {{currentMotorSF}}
                  </option>
                </select>
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="motorCode">Motor Code</label>
                <select
                id="selectedMotorCode"
                class="form-control"
                [(ngModel)]="electricalItem.selectedMotorCode"
                name="selectedMotorCode"
                >
                  <option
                    *ngFor="let currentMotorCode of electricalItem.motorCode" 
                    [ngValue]="currentMotorCode"
                    [selected]="currentMotorCode==electricalItem.selectedMotorCode"
                  >
                    {{currentMotorCode}}
                  </option>
                </select>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="selectedSccRating">SCC Rating</label>
                <select
                id="selectedSccRating"
                class="form-control"
                [(ngModel)]="electricalItem.selectedSccRating"
                name="selectedSccRating"
                >
                  <option
                    *ngFor="let currentSccRating of electricalItem.sccRating" 
                    [ngValue]="currentSccRating"
                    [selected]="currentSccRating==electricalItem.selectedSccRating"
                  >
                    {{currentSccRating}}
                  </option>
                </select>
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="selectedEnclosureRating">Enclosure Rating</label>
                <select
                id="selectedEnclosureRating"
                class="form-control"
                [(ngModel)]="electricalItem.selectedEnclosureRating"
                name="selectedEnclosureRating"
                >
                  <option
                    *ngFor="let currentEnclosureRating of electricalItem.enclosureRating" 
                    [ngValue]="currentEnclosureRating"
                    [selected]="currentEnclosureRating==electricalItem.selectedEnclosureRating"
                  >
                    {{currentEnclosureRating}}
                  </option>
                </select>
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="loadFactor">Load Factor (%)</label>
                <input type="number" class="form-control" [(ngModel)]="electricalItem.loadFactor" name="loadFactor">
              </div>
            </div>
            <div class="col-12 col-sm-3 align-self-end">
              <div class="form-group">
                <label for="selectedLoadDuty">Load Duty</label>
                <select
                id="selectedLoadDuty"
                class="form-control"
                [(ngModel)]="electricalItem.selectedLoadDuty"
                name="selectedLoadDuty"
                >
                  <option
                    *ngFor="let currentLoadDuty of electricalItem.loadDuty" 
                    [ngValue]="currentLoadDuty"
                    [selected]="currentLoadDuty==electricalItem.selectedLoadDuty"
                  >
                    {{currentLoadDuty}}
                  </option>
                </select>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-sm-6 align-self-end">
              <div class="row">
                <div class="col-12 col-sm-6 align-self-end">
                  <div class="form-group">
                    <label>Ambient Temp (°C)</label>
                    <input class="form-control">
                  </div>
                </div>
                <div class="col-12 col-sm-6 align-self-end">
                  <div class="form-group">
                      <label>Termination Temp (°C)</label>
                    <input class="form-control">
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 col-sm-6 align-self-end">
                  <div class="form-group">
                    <label>Operating T Min.(°C)</label>
                    <input class="form-control">
                  </div>
                </div>
                <div class="col-12 col-sm-6 align-self-end">
                  <div class="form-group">
                    <label>Operating T Max.(°C)</label>
                    <input class="form-control">
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 col-sm-6 align-self-end">
                  <div class="form-group">
                    <label>Insul. Designation</label>
                    <input class="form-control">
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-sm-6 align-self-end" style="border: 1px solid; border-radius: 8px">
              <div class="row d-flex justify-content-center" style="padding-bottom: 1.3rem!important;">
                <label><strong>Equipment Hazloc Rating</strong></label>
              </div>
              <div class="row">
                <div class="col-3">
                  <label><strong>{{electricalItem?.selectedHazlocClass}}</strong></label>
                </div>
                <div class="col-3">
                  <label><strong>{{electricalItem?.selectedHazlocZone}}</strong></label>
                </div>
                <div class="col-3">
                  <label><strong>{{electricalItem?.selectedHazlocGroup}}</strong></label>
                </div>
                <div class="col-3">
                  <label><strong>{{electricalItem?.selectedHazlocTemperature}}</strong></label>
                </div>
              </div>
              <div class="row">
                <div class="col-12 col-sm-6 align-self-end" *ngIf="electricalItem?.hazlocClass != null">
                  <div class="form-group">
                    <label for="selectedHazlocClass">Hazloc Class</label>
                    <select
                    id="selectedHazlocClass"
                    class="form-control"
                    [(ngModel)]="electricalItem.selectedHazlocClass"

                    (ngModelChange)="optionChanged($event)"
                    name="selectedHazlocClass"
                    >
                      <option
                        *ngFor="let currentHazlocClass of electricalItem.hazlocClass" 
                        [ngValue]="currentHazlocClass"
                        [selected]="currentHazlocClass==electricalItem.selectedHazlocClass"
                      >
                        {{currentHazlocClass}}
                      </option>
                    </select>
                  </div>
                </div>
                <div class="col-12 col-sm-6 align-self-end" *ngIf="electricalItem?.hazlocZone != null">
                  <div class="form-group">
                    <label for="selectedHazlocZone">Hazloc Zone</label>
                    <select [disabled]="electricalItem.selectedHazlocClass == electricalItem.hazlocClass[0] || !electricalItem.selectedHazlocClass"
                    id="selectedHazlocZone"
                    class="form-control"
                    [(ngModel)]="electricalItem.selectedHazlocZone"
                    #selectedHazlocZone="ngModel"
                    name="selectedHazlocZone"
                    >
                      <option
                        *ngFor="let currentHazlocZone of electricalItem.hazlocZone" 
                        [ngValue]="currentHazlocZone"
                        [selected]="currentHazlocZone==electricalItem.selectedHazlocZone"
                      >
                        {{currentHazlocZone}}
                      </option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 col-sm-6 align-self-end">
                  <div class="form-group" *ngIf="electricalItem?.hazlocGroup != null">
                    <label for="selectedHazlocGroup">Hazloc Group</label>
                    <select [disabled]="electricalItem.selectedHazlocClass == electricalItem.hazlocClass[0] || !electricalItem.selectedHazlocClass"
                    id="selectedHazlocGroup"
                    class="form-control"
                    [(ngModel)]="electricalItem.selectedHazlocGroup"
                    #selectedHazlocGroup="ngModel"
                    name="selectedHazlocGroup"
                    >
                      <option
                        *ngFor="let currentHazlocGroup of electricalItem.hazlocGroup" 
                        [ngValue]="currentHazlocGroup"
                        [selected]="currentHazlocGroup==electricalItem.selectedHazlocGroup"
                      >
                        {{currentHazlocGroup}}
                      </option>
                    </select>
                  </div>
                </div>
                <div class="col-12 col-sm-6 align-self-end">
                  <div class="form-group" *ngIf="electricalItem?.hazlocGroup != null">
                    <label for="selectedHazlocTemperature">Hazloc Temperature</label>
                    <select [disabled]="electricalItem.selectedHazlocClass == electricalItem.hazlocClass[0] || !electricalItem.selectedHazlocClass"
                    id="selectedHazlocTemperature"
                    class="form-control"
                    [(ngModel)]="electricalItem.selectedHazlocTemperature"
                    #selectedHazlocTemperature="ngModel"
                    name="selectedHazlocTemperature"
                    >
                      <option
                        *ngFor="let currentHazlocTemperature of electricalItem.hazlocTemperature" 
                        [ngValue]="currentHazlocTemperature"
                        [selected]="currentHazlocTemperature==electricalItem.selectedHazlocTemperature"
                      >
                        {{currentHazlocTemperature}}
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>
    <div class="row">
      <div class="form-group">
        <a routerLink="/project/5a1ed5f11af5b524cc2b4129/electricals/" class="btn btn-primary">Back</a>
        <button type="submit" class="btn btn-success" [disabled]="!electricalForm.form.valid">Update/Create</button>
      </div>
    </div>
    <div *ngIf="sizeWindow > 576; else werticalTable">
      <div class="row achievements-wrapper">
        <table class="table table-bordered">
        <thead>
          <tr>
            <th>Rev.</th>
            <th>Equipment Tag</th>
            <th>Equipment Description</th>
            <th>Load Type</th>
            <th>System Voltage</th>
            <th>Power System</th>
            <th>Nameplate Rating</th>
            <th>Units</th>
            <th>Total % PF</th>
            <th>Total % EFF</th>
            <th>Motor SF</th>
            <th>Motor Code</th>
            <th>Load Factor %</th>
            <th>Load Duty</th>
            <th>Total Connected FLA</th>
            <th>Total Connected KW</th>
            <th>Total Connected KVAR</th>
            <th>Total Connected KVA</th>
            <th>Total Demand FLA</th>
            <th>Total Demand KW</th>
            <th>Total Demand KVAR</th>
            <th>Total Demand KVA</th>
            <th>Total Scenario 1 Load Factor %</th>
            <th>Total Scenario 1 FLA</th>
            <th>Total Scenario 1 KW</th>
            <th>Total Scenario 1 KVAR</th>
            <th>Total Scenario 1 KVA</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{electricalItem?.revision}}</td>
            <td>{{electricalItem?.equipmentTag}}</td>
            <td></td>
            <td></td>
            <td></td>
            <td>{{electricalItem?.selectedPowerSystem}}</td>
            <td>{{electricalItem?.nameplateRating}}</td>
            <td>{{electricalItem?.selectedUnits}}</td>
            <td>{{electricalItem?.totalPF}}</td>
            <td>{{electricalItem?.totalEFF}}</td>
            <td>{{electricalItem?.loadFactor}}</td>
            <td>{{electricalItem?.selectedLoadDuty}}</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
        </table>
    </div>
    </div>
    <ng-template #werticalTable>
      <div class="row">
        <table class="table table-bordered">
          <tr>
            <td><strong>Rev.</strong></td>
            <td>{{electricalItem?.revision}}</td>
          </tr>
          <tr>
            <td><strong>Equipment Tag</strong></td>
            <td>{{electricalItem?.equipmentTag}}</td>
          </tr>
          <tr>
            <td><strong>Equipment Description</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Load Type</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>System Voltage</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Power System</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Nameplate Rating</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Units</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Total % PF</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Total % EFF</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Motor SF</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Motor Code</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Load Factor %</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Load Duty</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Total Connected FLA</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Total Connected KW</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Total Connected KVAR</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Total Connected KVA</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Total Demand FLA</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Total Demand KW</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Total Demand KVAR</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Total Demand KVA</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Total Scenario 1 Load Factor %</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Total Scenario 1 FLA</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Total Scenario 1 KW</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Total Scenario 1 KVAR</strong></td>
            <td></td>
          </tr>
          <tr>
            <td><strong>Total Scenario 1 KVA</strong></td>
            <td></td>
          </tr>
        </table>
      </div>
    </ng-template>
  </form>
</div>